"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[954],{954:(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});var a=s(540),r=s(306),c=s(266),l=s(300);const n=function(){const e=(0,a.useContext)(r.A),[t,s]=(0,a.useState)({searchTerm:"",results:[],show:"neither",requestCount:0});function n(t){27==t.keyCode&&e({type:"closeSearch"})}return(0,a.useEffect)((()=>(document.addEventListener("keyup",n),()=>document.removeEventListener("keyup",n))),[]),(0,a.useEffect)((()=>{if(t.searchTerm.trim()){s({...t,show:"loading"});const e=setTimeout((()=>{s({...t,requestCount:t.requestCount+1})}),330);return()=>{clearTimeout(e)}}s({...t,show:"neither"})}),[t.searchTerm]),(0,a.useEffect)((()=>{if(t.requestCount){const e=c.A.CancelToken.source();async function a(){try{const a=await c.A.post("/search",{searchTerm:t.searchTerm},{cancelToken:e.token});s({...t,results:a.data,show:"results"})}catch(e){console.log(e)}}return a(),()=>e.cancel()}}),[t.requestCount]),a.createElement(a.Fragment,null,a.createElement("div",{className:"search-overlay-top shadow-sm"},a.createElement("div",{className:"container container--narrow"},a.createElement("label",{htmlFor:"live-search-field",className:"search-overlay-icon"},a.createElement("i",{className:"fas fa-search"})),a.createElement("input",{autoFocus:!0,type:"text",autoComplete:"off",id:"live-search-field",className:"live-search-field",placeholder:"What are you interested in?",onChange:function(e){const a=e.target.value;s({...t,searchTerm:a})}}),a.createElement("span",{onClick:()=>e({type:"closeSearch"}),className:"close-live-search"},a.createElement("i",{className:"fas fa-times-circle"})))),a.createElement("div",{className:"search-overlay-bottom"},a.createElement("div",{className:"container container--narrow py-3"},a.createElement("div",{className:"circle-loader "+("loading"==t.show?"circle-loader--visible":"")}),a.createElement("div",{className:"live-search-results "+("results"==t.show?"live-search-results--visible":"")},t.results.length>0?a.createElement("div",{className:"list-group shadow-sm"},a.createElement("div",{className:"list-group-item active"},a.createElement("strong",null,"Search Results")," (",t.results.length," ",t.results.length>1?"items":"item"," ","found)"),t.results.map((t=>a.createElement(l.A,{post:t,key:t._id,onClick:()=>e({type:"closeSearch"})})))):a.createElement("p",{className:"alert alert-danger text-center shadow-sm"},"Sorry, we could not find any results for that search.")))))}}}]);